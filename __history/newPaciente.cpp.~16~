//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "newPaciente.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TFormNewPaciente *FormNewPaciente;
//---------------------------------------------------------------------------
__fastcall TFormNewPaciente::TFormNewPaciente(TComponent* Owner)
	: TForm(Owner)
{

}
//---------------------------------------------------------------------------


void __fastcall TFormNewPaciente::FormCreate(TObject *Sender)
{
	SQLConnection1->Params->Add("Database=C:\\Users\\karla\\Documents\\Embarcadero\\Studio\\Projects\\Dentista\\Dentista1.db");
	try {
		SQLConnection1->Open();
		SQLConnection1->Connected = true;
		String consulta = "SELECT id, nombre, apellido FROM Dentista;";
		SQLQuery1->SQL->Clear();
		SQLQuery1->SQL->Add(consulta);
		SQLQuery1->ExecSQL();
		if(!SQLQuery1->IsEmpty()){
			SQLQuery1->First();
            datos = new TStringList;
			TStringList* datos;
			TField* campo;
			__try {
				SQLQuery1->GetFieldNames(datos);
				while(!SQLQuery1->Eof){
					for(int i = 0; i < datos->Count; ++i) {
						  campo = SQLQuery1->FieldByName(datos->Strings[i]);
						  cmbDentistas->AddItem(""+campo->AsString+"", NULL);
					}
				}
			}__finally {
				datos->Free();
			}
		}
	} catch (EDatabaseError& E) {
		ShowMessage("Error Conexion:" + E.Message);
	}
}
//---------------------------------------------------------------------------

